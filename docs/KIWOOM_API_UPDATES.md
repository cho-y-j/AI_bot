# 키움증권 OpenAPI+ 최신 변경사항

## 1. 대체거래소 도입 관련 변경사항 (2023년)

### 1.1 조건검색 및 실시간 조건검색 변경

키움증권은 대체거래소 도입과 관련하여 조건검색 및 실시간 조건검색 기능에 변경사항을 적용했습니다.

- **현재 상태**: 조건검색, 실시간 조건검색은 KRX 시세 데이터를 사용한 결과만 제공
- **변경 내용**: 통합시세 또는 NXT시세로 호출 시 빈 문자열("") 리턴

### 1.2 지원되지 않는 함수 호출

다음 함수 호출 시 빈 문자열("") 리턴:
```python
KOA_Functions(_T("GetConditionName_NXT"), " 영웅 조건식")
KOA_Functions(_T("getconditionname_nxt"), " 영웅 조건식")
KOA_Functions(_T("GetConditionName_ALL"), " 영웅 조건식")
KOA_Functions(_T("getconditionname_all"), " 영웅 조건식")
KOA_Functions(_T("GetExchangeName"), sCondionName)
KOA_Functions(_T("getexchangename"), sCondionName)
```

**참고**: 통합시세 및 NXT 시세를 활용한 조건검색 및 실시간 조건검색은 추후 서비스 제공 시점에 별도 안내 예정

## 2. 버전 관리 및 로그인 관련 주의사항

### 2.1 OpenAPI 버전처리

- **현재 최신 버전**: 6.47 (계좌비밀번호 입력창 왼쪽 상단에서 확인 가능)
- **자동 로그인 사용 시 주의사항**: 
  - 자동 로그인 사용 시 모듈 버전처리가 되지 않음
  - 예기치 않은 오동작 방지를 위해 일주일에 한 번 이상 자동 로그인 해지 후 수동 로그인으로 버전처리 권장
  - 장종료 후 또는 주말에도 버전처리 가능

### 2.2 버전처리 방법

1. 수동 로그인 시 버전처리가 필요한 경우 알림 메시지 창 팝업
2. 메시지 창이 출력되면 **메시지 창 닫기 버튼을 누르기 전에** 키움 OpenAPI 프로그램 먼저 종료
3. KOA Studio 사용 중이라면 함께 종료
4. 메시지 창 닫기
5. 버전처리 자동 진행 후 프로그램 재실행

### 2.3 버전처리 예시

- OpenAPI 프로그램 이름이 "Test.exe"인 경우:
  1. 버전처리 알림창 표시 시 "Test.exe" 프로그램 먼저 종료
  2. 알림창 닫기
  3. KOA Studio 실행 중이면 함께 종료 후 알림창 닫기

**주의**: 알림창이나 로그인 화면을 먼저 닫으면 버전처리가 반복되거나 실패할 수 있음

## 3. 계좌 관련 설정

### 3.1 계좌비밀번호 설정

- **필요 상황**: 주문이나 잔고조회 등 계좌번호 이용 시 (운영서버, 모의투자 서버 모두)
- **설정 방법**:
  1. 로그인 후 작업표시줄 오른쪽 트레이 메뉴에서 "계좌비밀번호 저장" 선택
  2. 계좌비밀번호 입력화면에서 사용할 계좌번호 선택
  3. 계좌비밀번호 입력 후 "등록" 클릭
  
**참고**: 모의투자 계좌비밀번호는 모두 "0000"

**주의**: TR에 계좌비밀번호 항목이 있더라도 사용되지 않으며, 반드시 트레이 메뉴를 통해 설정해야 함

### 3.2 자동 로그인 설정

1. 로그인 후 트레이 메뉴(모니터 오른쪽 하단)의 격자무늬 OpenAPI 아이콘 클릭
2. "계좌비밀번호 저장" 메뉴 선택
3. 계좌비밀번호 입력창에서 비밀번호 입력
4. "등록" 또는 "전체등록" 버튼 클릭
5. "AUTO" 옵션 체크

## 4. 개발 시 주의사항

1. **버전 관리**: 정기적인 버전 업데이트 확인 및 적용
2. **조건검색 사용**: KRX 시세 데이터만 지원되므로 관련 기능 사용 시 주의
3. **계좌 정보 처리**: 계좌비밀번호는 반드시 트레이 메뉴를 통해 설정
4. **자동 로그인**: 장기간 사용 시 버전 처리를 위해 주기적으로 수동 로그인 수행

## 5. 향후 업데이트 예정 사항

- 통합시세 및 NXT 시세를 활용한 조건검색 및 실시간 조건검색 서비스 (제공 시점 미정) 